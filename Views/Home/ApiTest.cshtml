@{
    ViewData["Title"] = "API Test";
}

<h2>🔌 API Testing Page</h2>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>Products API</h5>
            </div>
            <div class="card-body">
                <button class="btn btn-primary mb-2" onclick="testGetProducts()">Get All Products</button>
                <button class="btn btn-info mb-2" onclick="testGetLowStock()">Get Low Stock</button>
                <div id="apiResult" class="mt-3"></div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        async function testGetProducts() {
            try {
                const response = await fetch('/api/ProductsApi');
                const data = await response.json();
                document.getElementById('apiResult').innerHTML =
                    `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('apiResult').innerHTML =
                    `<div class="alert alert-danger">Error: ${error}</div>`;
            }
        }

        async function testGetLowStock() {
            try {
                const response = await fetch('/api/ProductsApi/low-stock');
                const data = await response.json();
                document.getElementById('apiResult').innerHTML =
                    `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('apiResult').innerHTML =
                    `<div class="alert alert-danger">Error: ${error}</div>`;
            }
        }
    </script>
}